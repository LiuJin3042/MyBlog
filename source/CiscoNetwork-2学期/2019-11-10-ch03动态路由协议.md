# 动态路由协议

通过路由器相互通讯, 得到本地网络上所有的网段

## RIP协议

* Routing Information Protocol, 路由信息协议
* RIPv1是IPv4有类路由协议
* 每30s向其他路由器通告网络

```\
conf t
router rip
version 2 # 使用RIPv2, 无类ip地址
network 192.168.1.0
network 192.168.2.0 # 通告我的直连网段
(enable)show ip protocols # 查看路由协议
```

* 禁用自动汇总, 会出现数据无法达到

```
no auto-summary
```

* 不向终端网络发送通告

```
router rip
passive-interface g0/0
```

* 传播默认路由

```
ip route 0.0.0.0 0.0.0.0
router rip
```



## RIP实战

现在查看[实战部分1](https://www.ccna7.com/3-2-1-8-packet-tracer-configuring-ripv2/)

R1

```tcl
!R1
en
conf terminal
!Use the appropriate command to create a default route on R1 for all Internet traffic to exit the network through S0/0/1.
ip route 0.0.0.0 0.0.0.0 s0/0/1
!Enter RIP protocol configuration mode.
router rip
!Use version 2 of the RIP protocol and disable the summarization of networks.
version 2
no auto-summary
!Configure RIP for the networks that connect to R1.
network 192.168.1.0
network 192.168.2.0
!Configure the LAN port that contains no routers so that it does not send out any routing information.
passive-interface gig 0/0
!Advertise the default route configured in step 1a with other RIP routers.
default-information originate
exit
exit
!check configure
show ip protocols
!save configure
copy running-config startup-config 
```

R2

```
en
conf terminal
route rip
version 2
no auto-summary
network 192.168.2.0
network 192.168.3.0
network 192.168.4.0
passive-interface gig 0/0
exit
exit
Copy running-config startup-config
```



R3

```tcl
en
conf terminal
router rip
version 2
no auto-summary
network 192.168.4.0
network 192.168.5.0
passive-interface gig 0/0
exit
exit
Copy running-config startup-config
```

[实战部分2](http://www.cabrillo.edu/~rgraziani/cis82/labs-v6/3-2-1-9-Lab-ConfiguringBasicRIPv2.pdf)

 ## 路由查找

### 在#下查看路由配置

显示路由器当前配置的 IPv4 路由协议设置

```
show ip protocols
```

显示安装在路由表中的路由

```
show ip route
```



### IPv4的路由级别

* 如果一个路由器不包含子网, 也不被包含, 他是一级路由
* 如果一个路由包含子网, 不被包含, 他是一级父路由
* 如果一个路由被包含, 他是二级子路由

### IPv6路由级别

* IPv6都是一级路由



