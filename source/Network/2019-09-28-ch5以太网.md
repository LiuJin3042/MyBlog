# 以太网

思乐公司发明

## 以太网协议

### 以太网帧

* 最小64字节, 最大1518字节
* 内容
  * 前导码, 数据帧开始
  * 目标, 源的mac地址
  * 以太网类型
  * 上一层的数据
  * FCS, 校验码

### MAC地址

* 48位, 12个16进制数, 每块网卡都有一个MAC地址. 刻录在网卡的ROM中, 不可更改. 
* 前三个字节是厂商编码: OUI, 组织唯一标识符, 接着三个字节由厂商分配. 思科OUI是00-60-2F
* 单播MAC地址: 单播通讯必须指定对方设备的MAC地址, 只处理符合自己MAC地址的信息. 
* 多播: MAC地址为FF-FF-FF-FF-FF-FF

## 交换机

* 二层设备
* MAC地址表, CAM, 在接受到端口1的信息, 包括源MAC和目标MAC, CAM记录这个端口对应的MAC地址, 然后给除了来源以外的端口群发信息(flood out, 泛洪), 4端口收到信息然后回复, CAM记录4端口对应的MAC地址. 
* 一个端口可以对应多个MAC地址, 一个MAC地址只能出现在一个端口.

### 交换机转发

* 存储转发: 存储所有数据, 校验完毕, 转发
* 直通: 收到数据包立刻转发
  * 免分片交换, 交换机检验数据前64个字节, 没有错误之后, 全部转发.