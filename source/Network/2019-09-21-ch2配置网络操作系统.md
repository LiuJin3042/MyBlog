# ch2：配置网络操作系统

## 思科IOS

### 简介

* 思科的操作系统
* 允许用户与设备交互
* RJ45接口：console口，即控制台接口，在控制计算机上打开一个终端CLI进行配置
* AUX口: 辅助控制口, console口无法使用的时候
* 每一个思科系统都有一个IOS

### 命令结构

* 关键字, 如果不会引起歧义, 可以缩短
* 参数

### 帮助

* 上下文帮助, 直接输入问号`?`

## 基本设备配置

### 主机名

* 设备名称: 用来区分设备, 好的设备名能准确表达设备的角色
  * 大小写敏感
  * 字母, 数字, 破折号

* 配置主机名

  ```
  enable
  config terminal
  hostname SW-Floor-1
  no hostname // 把主机名设置为
  ```

### 默认限制对设备配置的访问

* 使用分层模式对设备设置密码

  * 密码保护特权exec访问
  * 密码保护用户exec访问
  * 密码保护telnet访问
  * 加密密码+法律通知

* 配置密码

  * 特权exec密码

    ```shell
    // 用户模式下
    enable
    conf terminal
    enable secret your_password // 设置特权exec的使能加密密码, 密码以密文存储
    exit // 退出配置模式
    disable // 退出特权模式
    enable // 会提示输入密码
    ```

  * 用户exec密码

    ```
    // 配置模式(config)下
    line console 0 // line console代表线路控制台配置, 0代表第一个(大多只有一个)控制台接口
    password your_password
    login // 启用用户exec访问
    exit // 回到配置模式
    ```

  * 虚拟终端(VTY)线路支持设备远程访问, 配置密码

    ```
    // 配置模式下
    line vty 0 15 // 为0-15共16个VTY线路配置密码
    password your_password 
    login
    ```

* 加密密码

  ```
  // 配置模式下
  service password-encryption // 加密密码
  show running-conf // 查看密码是否加密
  ```

* 标语

  ```
  // 配置模式下
  banner motd #No unauthorized access allowed# // ## 是分隔符, 是必须的, 分隔符可以任意, 但不能是警告语句中的字符
  ```

* 保存配置

  ```
  // 特权模式下
  show running-config // 目前配置
  show startup-config // 开机配置
  copy running-config startup-config // 或者 copy run start
  reload // 重启, 删除为保存的配置
erase startup-config // 删除开机配置
  ```

* 保存配置到文本文件

  * 使用`show startup-config`输出所有配置到屏幕上
  * 复制配置到文本文件中
  * 复制文本文件的配置到另一个终端里, 就可以重复这一配置

  

  